# -*- sh -*-
#
#     tiger - A UN*X security checking system
#     Copyright (C) 1993 Douglas Lee Schales, David K. Hess, David R. Safford
#
#     Please see the file `COPYING' for the complete copyright notice.
#
# SunOS/5/config - 06/14/93
#
#-----------------------------------------------------------------------------
#

UUID="`/usr/bin/id | /usr/bin/sed -e 's/^uid=\([0-9][0-9]*\)[^0-9].*$/\1/'`"

[ "$UUID" != '0' -a "$Tiger_TESTMODE" != 'Y' ] && {
  echo 1>&2
  echo 'This script should be run from a super-user account.' 1>&2
  echo 1>&2
#  exit 1
}

CAT=/usr/bin/cat
LS=/usr/bin/ls
# With /usr/bin/ls, just '-l' to get group owner
# For /usr/ucb/ls, use "-lg"
LSGROUP="-l"
# -L to show file instead of symlink
LSLINK="-L"
RM=/usr/bin/rm
AWK=/usr/bin/nawk
GREP=/usr/bin/grep
EGREP=/usr/bin/egrep
SGREP="$EGREP -s"
SED=/usr/bin/sed
SORT=/usr/bin/sort
COMM=/usr/bin/comm
TAIL=/usr/bin/tail
MV=/usr/bin/mv
TR=/usr/bin/tr
JOIN=/usr/bin/join
GROUPSS=/usr/bin/groups
FILECMD=/usr/bin/file
UNIQ=/usr/bin/uniq
BASENAME=/usr/bin/basename
CHMOD=/usr/bin/chmod
CHOWN=/usr/bin/chown
LN=/usr/bin/ln
PASTE=/usr/bin/paste
DIFF=/usr/bin/diff
DIFFD=' '
TCPD=/usr/sbin/tcpd
MAILER=/usr/bin/mail
SENDMAILS="/usr/lib/sendmail /usr/lib/sendmail.mx"
SENDMAILCF="/etc/mail/sendmail.cf"
export SENDMAILS SENDMAILCF
#
export CAT LS LSGROUP LSLINK RM AWK GREP EGREP SGREP SED
export SORT COMM TAIL MV TR JOIN GROUPSS FILECMD UNIQ BASENAME
export CHMOD CHOWN LN PASTE DIFF DIFFD MAILER TCPD
#
UNAME=/usr/bin/uname
GETHOSTNAME="/usr/bin/uname -n"
EXPR=/usr/bin/expr
STRINGS=/usr/bin/strings
FIND=/usr/bin/find
FINDXDEV=-xdev
FMT=/usr/bin/fmt
CC=/opt/cygnus/bin/gcc
CFLAGS="-DNEEDGETWD"
PS=/usr/bin/ps
DATE=/usr/bin/date
DATECMD="$DATE +%y%m%d"
TIMECMD="$DATE +%H:%M"
TESTLINK=-h
TESTEXEC=-x
#
export UNAME GETHOSTNAME EXPR STRINGS FIND FINDXDEV
export FMT CC PS DATE DATECMD TIMECMD TESTLINK CFLAGS TESTEXEC
#
WAIT=wait
#
#
YPCAT=/usr/bin/ypcat
NISCAT=/usr/bin/niscat
#
export WAIT YPCAT NISCAT
#
#
MAILSPOOL=/var/mail
ETCSHELLS=/etc/shells
CRONSPOOL=/var/spool/cron/crontabs
#
export MAILSPOOL ETCSHELLS CRONSPOOL
# egrep regex that defines a local filesystem
LOCFS="(ufs|tmpfs)"
export LOCFS
#
# System dev directories...
# 
DEVDIRSYS="/dev/ /devices"
#
export DEVDIRSYS
#
SYSDEFAULTPATH="/usr/sbin:/usr/bin"
export SYSDEFAULTPATH

CDIR="$BASEDIR/systems"
eval `
  while read var file
  do
    if [ -f "$CONFIG_DIR/$file" ]; then
      loc="$CONFIG_DIR"
    elif [ -f "$CDIR/$OS/$REL/$REV/$ARCH/$file" ]; then
      loc="$CDIR/$OS/$REL/$REV/$ARCH"
    elif [ -f "$CDIR/$OS/$REL/$REV/$file" ]; then
      loc="$CDIR/$OS/$REL/$REV"
    elif [ -f "$CDIR/$OS/$REL/$file" ]; then
      loc="$CDIR/$OS/$REL"
    elif [ -f "$CDIR/$OS/$file" ]; then
      loc="$CDIR/$OS"
    else
      loc=""
    fi
    if [ "$loc" != "" ]; then
      echo $var="$loc/$file;"
    else
      echo "$var=;"
    fi
    echo "export $var;"
  done << EOL
GETFS getfs"
GEN_PASSWD_SETS gen_passwd_sets
GEN_GROUP_SETS gen_group_sets
GEN_ALIAS_SETS gen_alias_sets
CHECK_CRON check_cron
GEN_BOOTPARAM_SETS gen_bootparam_sets
GEN_EXPORT_SETS gen_export_sets
GEN_SERVICES_SETS gen_services
GET_MOUNTS gen_mounts
SIGNATURE_FILE signatures
SERVICESFILE services
INETDFILE inetd
FILE_ACL file_access_list
SUID_LIST suid_list
REL_FILE_EXCP rel_file_exp_list
GEN_CRON_FILES gen_cron
GETCLIENTDIRS gendlclients
GEN_INETD_SETS gen_inetd
GETDISKS getdisks
EMBEDDEDLIST embedlist
GETUSERHOME getuserhome
EOL
`
